<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0" version="26.1.3">
  <diagram name="Страница — 1" id="1tCm8Htg7XrhjoZbWzQY">
    <mxGraphModel dx="2609" dy="506" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <UserObject label="/project-root&#xa;    /auth-service&#xa;    /user-service&#xa;    /inventory-service&#xa;    /task-service&#xa;    /category-service&#xa;    /api-gateway&#xa;    /docker-compose.yml" link="/project-root&#xa;    /auth-service&#xa;    /user-service&#xa;    /inventory-service&#xa;    /task-service&#xa;    /category-service&#xa;    /api-gateway&#xa;    /docker-compose.yml" id="KKvg99RyR3ylcQxdZCcF-1">
          <mxCell style="text;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="620" y="120" width="170" height="140" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="-- Схема для Auth-сервиса&#xa;CREATE SCHEMA auth_service;&#xa;&#xa;-- Таблица пользователей&#xa;CREATE TABLE auth_service.users (&#xa;    id SERIAL PRIMARY KEY,&#xa;    username VARCHAR(255) UNIQUE,&#xa;    email VARCHAR(255) UNIQUE,&#xa;    password_hash TEXT,&#xa;    role_id INT,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица ролей&#xa;CREATE TABLE auth_service.roles (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);&#xa;&#xa;-- Таблица сессий пользователей&#xa;CREATE TABLE auth_service.user_sessions (&#xa;    id SERIAL PRIMARY KEY,&#xa;    user_id INT REFERENCES auth_service.users(id),&#xa;    session_token TEXT,&#xa;    expires_at TIMESTAMP&#xa;);" link="-- Схема для Auth-сервиса&#xa;CREATE SCHEMA auth_service;&#xa;&#xa;-- Таблица пользователей&#xa;CREATE TABLE auth_service.users (&#xa;    id SERIAL PRIMARY KEY,&#xa;    username VARCHAR(255) UNIQUE,&#xa;    email VARCHAR(255) UNIQUE,&#xa;    password_hash TEXT,&#xa;    role_id INT,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица ролей&#xa;CREATE TABLE auth_service.roles (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);&#xa;&#xa;-- Таблица сессий пользователей&#xa;CREATE TABLE auth_service.user_sessions (&#xa;    id SERIAL PRIMARY KEY,&#xa;    user_id INT REFERENCES auth_service.users(id),&#xa;    session_token TEXT,&#xa;    expires_at TIMESTAMP&#xa;);" id="KKvg99RyR3ylcQxdZCcF-4">
          <mxCell style="text;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="240" y="450" width="300" height="430" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="-- Схема для User-сервиса&#xa;CREATE SCHEMA user_service;&#xa;&#xa;-- Таблица пользователей&#xa;CREATE TABLE user_service.users (&#xa;    id SERIAL PRIMARY KEY,&#xa;    first_name VARCHAR(255),&#xa;    last_name VARCHAR(255),&#xa;    phone_number VARCHAR(20),&#xa;    address TEXT,&#xa;    email VARCHAR(255) UNIQUE,&#xa;    profile_picture_url TEXT,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица предпочтений пользователя&#xa;CREATE TABLE user_service.user_preferences (&#xa;    id SERIAL PRIMARY KEY,&#xa;    user_id INT REFERENCES user_service.users(id),&#xa;    notification_preferences TEXT,&#xa;    theme VARCHAR(50),&#xa;    language VARCHAR(50),&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);" link="-- Схема для User-сервиса&#xa;CREATE SCHEMA user_service;&#xa;&#xa;-- Таблица пользователей&#xa;CREATE TABLE user_service.users (&#xa;    id SERIAL PRIMARY KEY,&#xa;    first_name VARCHAR(255),&#xa;    last_name VARCHAR(255),&#xa;    phone_number VARCHAR(20),&#xa;    address TEXT,&#xa;    email VARCHAR(255) UNIQUE,&#xa;    profile_picture_url TEXT,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица предпочтений пользователя&#xa;CREATE TABLE user_service.user_preferences (&#xa;    id SERIAL PRIMARY KEY,&#xa;    user_id INT REFERENCES user_service.users(id),&#xa;    notification_preferences TEXT,&#xa;    theme VARCHAR(50),&#xa;    language VARCHAR(50),&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);" id="KKvg99RyR3ylcQxdZCcF-6">
          <mxCell style="text;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="-230" y="450" width="320" height="400" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="-- Схема для Inventory-сервиса&#xa;CREATE SCHEMA inventory_service;&#xa;&#xa;-- Таблица предметов инвентаря&#xa;CREATE TABLE inventory_service.items (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT,&#xa;    category_id INT REFERENCES inventory_service.categories(id),&#xa;    quantity INT,&#xa;    user_id INT REFERENCES user_service.users(id),&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица категорий предметов&#xa;CREATE TABLE inventory_service.categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);" link="-- Схема для Inventory-сервиса&#xa;CREATE SCHEMA inventory_service;&#xa;&#xa;-- Таблица предметов инвентаря&#xa;CREATE TABLE inventory_service.items (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT,&#xa;    category_id INT REFERENCES inventory_service.categories(id),&#xa;    quantity INT,&#xa;    user_id INT REFERENCES user_service.users(id),&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица категорий предметов&#xa;CREATE TABLE inventory_service.categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);" id="KKvg99RyR3ylcQxdZCcF-7">
          <mxCell style="text;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="-690" y="450" width="390" height="330" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="-- Схема для Task-сервиса&#xa;CREATE SCHEMA task_service;&#xa;&#xa;-- Таблица задач&#xa;CREATE TABLE task_service.tasks (&#xa;    id SERIAL PRIMARY KEY,&#xa;    title VARCHAR(255),&#xa;    description TEXT,&#xa;    status VARCHAR(255),&#xa;    assigned_to INT REFERENCES user_service.users(id),&#xa;    due_date TIMESTAMP,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица истории изменений задач&#xa;CREATE TABLE task_service.task_history (&#xa;    id SERIAL PRIMARY KEY,&#xa;    task_id INT REFERENCES task_service.tasks(id),&#xa;    changed_by INT REFERENCES user_service.users(id),&#xa;    change_type VARCHAR(255),&#xa;    change_timestamp TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица категорий задач&#xa;CREATE TABLE task_service.task_categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);" link="-- Схема для Task-сервиса&#xa;CREATE SCHEMA task_service;&#xa;&#xa;-- Таблица задач&#xa;CREATE TABLE task_service.tasks (&#xa;    id SERIAL PRIMARY KEY,&#xa;    title VARCHAR(255),&#xa;    description TEXT,&#xa;    status VARCHAR(255),&#xa;    assigned_to INT REFERENCES user_service.users(id),&#xa;    due_date TIMESTAMP,&#xa;    created_at TIMESTAMP,&#xa;    updated_at TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица истории изменений задач&#xa;CREATE TABLE task_service.task_history (&#xa;    id SERIAL PRIMARY KEY,&#xa;    task_id INT REFERENCES task_service.tasks(id),&#xa;    changed_by INT REFERENCES user_service.users(id),&#xa;    change_type VARCHAR(255),&#xa;    change_timestamp TIMESTAMP&#xa;);&#xa;&#xa;-- Таблица категорий задач&#xa;CREATE TABLE task_service.task_categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);" id="KKvg99RyR3ylcQxdZCcF-8">
          <mxCell style="text;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="220" y="910" width="340" height="460" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-9" value="-- Схема для Category-сервиса&#xa;CREATE SCHEMA category_service;&#xa;&#xa;-- Таблица категорий задач&#xa;CREATE TABLE category_service.task_categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);&#xa;&#xa;-- Таблица категорий предметов&#xa;CREATE TABLE category_service.item_categories (&#xa;    id SERIAL PRIMARY KEY,&#xa;    name VARCHAR(255),&#xa;    description TEXT&#xa;);" style="text;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-230" y="910" width="310" height="250" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-10" value="+--------------------------+&#xa;                  |     API Gateway          |&#xa;                  |  (Spring Cloud Gateway)  |&#xa;                  +--------------------------+&#xa;                            |&#xa;        +-------------------+--------------------+&#xa;        |                   |                    |&#xa;+----------------+   +------------------+   +-------------------+&#xa;| Auth Service   |   | User Service     |   | Inventory Service |&#xa;| (Spring Boot)  |   | (Spring Boot)    |   | (Spring Boot)     |&#xa;+----------------+   +------------------+   +-------------------+&#xa;     |                     |                     |&#xa;     |                     |                     |&#xa;+------------+        +-----------+        +-------------+&#xa;| PostgreSQL |        | PostgreSQL|        | PostgreSQL  |&#xa;| DB         |        | DB        |        | DB          |&#xa;+------------+        +-----------+        +-------------+&#xa;     |                     |                     |&#xa;+------------------+  +----------------+  +-----------------+&#xa;| JWT Authentication|  | User Profiles  |  | Inventory Items |&#xa;| Service           |  | Service        |  | Service         |&#xa;+------------------+  +----------------+  +-----------------+&#xa;     |                     |                     |&#xa;     |                     |                     |&#xa;+----------------+   +------------------+   +-----------------+&#xa;| Token Service  |   | Preferences DB   |   | Item Categories |&#xa;| (JWT)          |   |                  |   |                 |&#xa;+----------------+   +------------------+   +-----------------+" style="text;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-980" y="1000" width="340" height="460" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-11" value="" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/databases/Azure_Database_PostgreSQL_Server.svg;" vertex="1" parent="1">
          <mxGeometry x="-860" y="1410" width="37.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-12" value="&lt;div&gt;auth_service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-1040" y="1500" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="KKvg99RyR3ylcQxdZCcF-15" target="KKvg99RyR3ylcQxdZCcF-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-15" value="category_service" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-960" y="1430" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="KKvg99RyR3ylcQxdZCcF-16" target="KKvg99RyR3ylcQxdZCcF-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-16" value="inventory_service" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-790" y="1430" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-17" value="&lt;div&gt;task_service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-750" y="1490" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-19" value="user_service" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-890" y="1500" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.398;entryY=1.005;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="KKvg99RyR3ylcQxdZCcF-19" target="KKvg99RyR3ylcQxdZCcF-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.362;entryY=0.992;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="KKvg99RyR3ylcQxdZCcF-12" target="KKvg99RyR3ylcQxdZCcF-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.434;entryY=0.997;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="KKvg99RyR3ylcQxdZCcF-17" target="KKvg99RyR3ylcQxdZCcF-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KKvg99RyR3ylcQxdZCcF-26" value="&lt;div&gt;schemas&lt;/div&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1105" y="1390" width="520" height="210" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
